Import('conf')
Import('dirs')

conf.CheckLib('dl')
libsam = conf.env.SharedLibrary('sam', [
	'array.c',
	'error.c',
	'es.c',
	'execute.c',
	'execute_types.c',
	'hash_table.c',
	'io.c',
	'main.c',
	'opcode.c',
	'parse.c',
	'string.c',
	'util.c',
])
conf.env.Append(LIBS=['c', 'm'])
conf.env.Install(dirs['install']['lib'], libsam)

SConscript(['../samiam/SConscript'], ['conf', 'dirs', 'libsam'])
